
==== LLDP Discovery
The _Link Layer Discovery Protocol (LLDP)_ is a vendor-neutral link layer protocol.
It is used by network devices for advertising their identity, capabilities, and neighbors.
_LLDP_ performs functions similar to several proprietary protocols, such as the _Cisco Discovery Protocol (CDP)_, _Extreme Discovery Protocol_, _Foundry Discovery Protocol (FDP)_, _Nortel Discovery Protocol (also known as SONMP)_, and _Microsoft's Link Layer Topology Discovery (LLTD)footnote:[Wikipedia LLDP: https://en.wikipedia.org/wiki/Link_Layer_Discovery_Protocol]_.

.Identifying the LLDP supported device
[options="header, autowidth"]
|===
| Name                      | OID                         | Description
| _lldpLocChassisIdSubtype_ | `.1.0.8802.1.1.2.1.3.1.0`   | The type of encoding used to identify the chassis associated with the local system. Possible values can be: +
                                                            _chassisComponent(1)_ +
                                                            _interfaceAlias(2)_ +
                                                            _portComponent(3)_ +
                                                            _macAddress(4)_ +
                                                            _networkAddress(5)_ +
                                                            _interfaceName(6)_ +
                                                            _local(7)_
| _lldpLocChassisId_        | `.1.0.8802.1.1.2.1.3.2.0`   | The string value used to identify the chassis component associated with the local system.
| _lldpLocSysName_          | `.1.0.8802.1.1.2.1.3.3.0`   | The string value used to identify the system name of the local system.
                                                            If the local agent supports link:http://tools.ietf.org/html/rfc3418[IETF RFC 3418], _lldpLocSysName_ object should have the same value of _sysName_ object.
| _lldpRemChassisIdSubtype_ | `.1.0.8802.1.1.2.1.4.1.1.4` | The type of encoding used to identify the chassis associated with the local system. Possible values can be: +
                                                            _chassisComponent(1)_ +
                                                            _interfaceAlias(2)_ +
                                                            _portComponent(3)_ +
                                                            _macAddress(4)_ +
                                                            _networkAddress(5)_ +
                                                            _interfaceName(6)_ +
                                                            _local(7)_
| _lldpRemChassisId_        | `.1.0.8802.1.1.2.1.4.1.1.5` | The string value used to identify the chassis component associated with the remote system.
| _lldpRemPortIdSubtype_    | `.1.0.8802.1.1.2.1.4.1.1.6` | The type of port identifier encoding used in the associated _lldpRemPortId_ object. +
                                                            +
                                                            _interfaceAlias(1)_ +
                                                            the octet string identifies a particular instance of the _ifAlias_ object (defined in IETF RFC 2863). If the particular _ifAlias_ object does not contain any values, another port identifier type should be used. +
                                                            +
                                                            _portComponent(2)_ +
                                                            the octet string identifies a particular instance of the _entPhysicalAlias_ object (defined in IETF RFC 2737) for a port or backplane component. +
                                                            +
                                                            _macAddress(3)_ +
                                                            this string identifies a particular unicast source address (encoded in network byte order and IEEE 802.3 canonical bit order) associated with the port (IEEE Std 802-2001). +
                                                            +
                                                            _networkAddress(4)_ +
                                                            this string identifies a network address associated with the port.
                                                            The first octet contains the _IANA AddressFamilyNumbers_ enumeration value for the specific address type, and octets 2 through N contain the _networkAddress_ address value in network byte order. +
                                                            +
                                                            _interfaceName(5)_ +
                                                            the octet string identifies a particular instance of the _ifName_ object (defined in IETF RFC 2863).
                                                            If the particular _ifName_ object does not contain any values, another port identifier type should be used. +
                                                            +
                                                            _agentCircuitId(6)_ +
                                                            this string identifies a agent-local identifier of the circuit (defined in RFC 3046) +
                                                            +
                                                            _local(7)_ +
                                                            this string identifies a locally assigned port ID.
| _lldpRemPortId_           | `.1.0.8802.1.1.2.1.4.1.1.7` | The string value used to identify the port component associated with the remote system.
| _lldpRemPortDesc_         | `.1.0.8802.1.1.2.1.4.1.1.8` | The string value used to identify the description of the given port associated with the remote system.
| _lldpRemSysName_          | `.1.0.8802.1.1.2.1.4.1.1.9` | The string value used to identify the system name of the remote system.
|===

This information is shown in the _LLDP Information_ box on the OpenNMS node page of the device.

[source, sql]
----
opennms=# \d lldpelement
                                     Table "public.lldpelement"
       Column        |           Type           |                     Modifiers
----------------------+--------------------------+----------------------------------------------------
id                   | integer                  | not null default nextval('opennmsnxtid'::regclass)
nodeid               | integer                  | not null
lldpchassisid        | text                     | not null
lldpchassisidsubtype | integer                  | not null
lldpsysname          | text                     | not null
lldpnodecreatetime   | timestamp with time zone | not null
lldpnodelastpolltime | timestamp with time zone | not null
Indexes:
   "pk_lldpelement" PRIMARY KEY, btree (id)
   "lldp_chassis_idx" btree (lldpchassisid)
   "lldp_sysname_idx" btree (lldpsysname)
   "lldpelement_nodeid_idx" btree (nodeid)
Foreign-key constraints:
   "fk_lldpelement_nodeid" FOREIGN KEY (nodeid) REFERENCES node(nodeid) ON DELETE CASCADE
----

[source, sql]
----
opennms=# \d lldplink
                                        Table "public.lldplink"
        Column          |           Type           |                     Modifiers
-------------------------+--------------------------+----------------------------------------------------
id                      | integer                  | not null default nextval('opennmsnxtid'::regclass)
nodeid                  | integer                  | not null
lldplocalportnum        | integer                  | not null
lldpportid              | text                     | not null
lldpportidsubtype       | integer                  | not null
lldpportdescr           | text                     | not null
lldpportifindex         | integer                  |
lldpremchassisid        | text                     | not null
lldpremchassisidsubtype | integer                  | not null
lldpremsysname          | text                     | not null
lldpremportid           | text                     | not null
lldpremportidsubtype    | integer                  | not null
----
